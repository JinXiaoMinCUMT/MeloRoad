{"version":3,"sources":["webpack:///src/pages/music/music-home.vue","webpack:///./src/pages/music/music-home.vue?11cc","webpack:///./src/pages/music/music-home.vue","webpack:///./src/assets/js/singer.js"],"names":["music_home","name","data","recommends","discList","singers","components","Scroll","scroll_scroll","methods","_extends","_getRecommend","_this","this","Object","recommend","then","res","code","config","slider","_getDiscList","_this2","list","slice","moreList","$router","push","moreSingers","_getSingerList","_this3","singer","_normalizeSinger","items","console","log","map","hot","title","forEach","item","index","js_singer","id","Fsinger_mid","Fsinger_name","key","Findex","ret","val","match","sort","a","b","charCodeAt","concat","selectItem","path","dissid","setDisc","selectSinger","setSinger","vuex_esm","activated","music_music_home","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_l","href","linkUrl","directives","rawName","value","expression","_v","on","click","$event","_s","dissname","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Singer","_ref","_classCallCheck","avater"],"mappings":"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","file":"static/js/3.ee98e9c46f6083b79603.js","sourcesContent":["<template>\n    <scroll :data=\"discList\">\n      <div class=\"music-home\">\n        <div class=\"lunbo\">\n          <mt-swipe>\n            <mt-swipe-item v-for=\"item in recommends\" :key=\"item.id\">\n              <a :href=\"item.linkUrl\">\n                <img v-lazy=\"item.picUrl\">\n              </a>\n            </mt-swipe-item>\n          </mt-swipe>\n        </div>\n        <div class=\"card-top\">\n          <div class=\"card-head\">\n            <h1 class=\"title\">爆款歌单</h1>\n            <span class=\"card-more\" @click=\"moreList\">更多 ></span>\n          </div>\n          <div class=\"card-body\">\n            <ul class=\"items\">\n              <li class=\"item\" v-for=\"item in discList\" :key=\"item.dissid\" @click=\"selectItem(item)\">\n                <div class=\"img-wrapper\">\n                  <img v-lazy=\"item.imgurl\">\n                </div>\n                <div class=\"desc-wrapper\">\n                  <span>{{item.dissname}}</span>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"card-mid\">\n          <div class=\"card-head\">\n            <h1 class=\"title\">当红炸子鸡</h1>\n            <span class=\"card-more\" @click=\"moreSingers\">更多 ></span>\n          </div>\n          <div class=\"card-body\">\n            <ul class=\"items\">\n              <li class=\"item\" v-for=\"item in singers\" :key=\"item.id\" @click=\"selectSinger(item)\">\n                <div class=\"img-wrapper\">\n                  <img v-lazy=\"item.avater\">\n                </div>\n                <div class=\"desc-wrapper\">\n                  <span>{{item.name}}</span>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </scroll>\n</template>\n\n<script>\nimport { getRecommend, getDiscList } from '@/api/recommend'\nimport { ERR_OK } from '@/api/config'\n// import Scroll from '@/base/scroll/scroll'\nimport { getSingerList } from '@/api/singer'\n// import { getMusicList } from '@/api/rank'\nimport Singer from 'assets/js/singer.js'\nimport Scroll from '@/base/scroll/scroll'\n// import { createSong } from 'assets/js/song.js'\nimport { mapMutations } from 'vuex'\n\nconst HOT_NAME = '热门数据'\nconst HOT_SINGER_LEN = 6\n\nexport default {\n  name: 'MusicHome',\n  data () {\n    return {\n      recommends: [],\n      discList: [],\n      singers: []\n    }\n  },\n  components: {\n    Scroll\n  },\n  methods: {\n    // 获取 qq 首页轮播图\n    _getRecommend () {\n      getRecommend().then((res) => {\n        if (res.code === ERR_OK) {\n          this.recommends = res.data.slider\n        }\n      })\n    },\n    // 获取 qq 歌单\n    _getDiscList () {\n      getDiscList().then((res) => {\n        if (res.code === ERR_OK) {\n          this.discList = res.data.list.slice(0, 6)\n        }\n      })\n    },\n    moreList () {\n      this.$router.push('/music/music-desc')\n    },\n    moreSingers () {\n      this.$router.push('/music/music-singer')\n    },\n    // 获取 6 位歌手\n    _getSingerList () {\n      getSingerList().then((res) => {\n        if (res.code === ERR_OK) {\n          this.singers = this._normalizeSinger(res.data.list)[0].items\n          console.log(this.singers)\n        }\n      })\n    },\n    _normalizeSinger (list) {\n      let map = {\n        hot: {\n          title: HOT_NAME,\n          items: []\n        }\n      }\n      list.forEach((item, index) => {\n        if (index < HOT_SINGER_LEN) {\n          map.hot.items.push(\n            new Singer({\n              id: item.Fsinger_mid,\n              name: item.Fsinger_name\n            })\n          )\n        }\n        const key = item.Findex\n        if (!map[key]) {\n          map[key] = {\n            title: key,\n            items: []\n          }\n        }\n        map[key].items.push(\n          new Singer({\n            id: item.Fsinger_mid,\n            name: item.Fsinger_name\n          })\n        )\n      })\n      // 为了得到有序列表， 我们需要处理 map\n      let hot = []\n      let ret = []\n      for (let key in map) {\n        let val = map[key]\n        if (val.title.match(/[a-zA-Z]/)) {\n          ret.push(val)\n        } else if (val.title === HOT_NAME) {\n          hot.push(val)\n        }\n      }\n      ret.sort((a, b) => {\n        return a.title.charCodeAt(0) - b.title.charCodeAt(0)\n      })\n      return hot.concat(ret)\n    },\n    selectItem (list) {\n      this.$router.push({\n        path: `/music/music-desc/${list.dissid}`\n      })\n      this.setDisc(list)\n    },\n    selectSinger (singer) {\n      // console.log(singer)\n      this.setSinger(singer)\n      this.$router.push({\n        path: `/music/music-singer/${singer.id}`\n      })\n    },\n    ...mapMutations({\n      setDisc: 'SET_DISC',\n      setSinger: 'SET_SINGER'\n    })\n  },\n  activated () {\n    this._getRecommend()\n    this._getDiscList()\n    this._getSingerList()\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n  @import \"~assets/styles/mixin.styl\"\n  .music-home\n    position: fixed\n    top: 2.1rem\n    left: 0\n    bottom: 0\n    width: 100%\n    display: flex\n    flex-direction: column\n    align-items: center\n    background: #fff\n    .lunbo\n      width: 90%\n      height: 2.5rem\n      a\n        dispaly: block\n        width: 100%\n        height: 100%\n        img\n          dispaly: block\n          width: 100%\n          height: 100%\n          border-radius: .1rem\n    .card-top\n      width: 90%\n      margin-top: .5rem\n      // 占位防闪烁\n      padding-bottom: 90%\n      height: 0\n      .card-head\n        display: flex\n        height: .5rem\n        line-height: .5rem\n        .title\n          width: 85%\n          font-size: .45rem\n        .card-more\n          color: #777\n          font-size: .3rem\n      .card-body\n        margin-top: .3rem\n        .items\n          display: flex\n          flex-wrap: wrap\n          justify-content: space-between\n          // padding-bottom: 95%\n          // height: 0\n          // position: relative\n          .item\n            width: 30%\n            display: flex\n            flex-wrap: wrap\n            // position: absoulte\n            .img-wrapper\n              width: 100%\n              padding-bottom: 100%\n              height: 0\n              img\n                width: 100%\n                border-radius: 10%\n            .desc-wrapper\n              margin: .1rem 0 .3rem 0\n              width: 100%\n              height:.6rem\n              line-height: .3rem\n              no-wrap()\n    .card-mid\n      width: 90%\n      margin-top: .5rem\n      // 占位防闪烁\n      padding-bottom: 90%\n      height: 0\n      .card-head\n        display: flex\n        height: .5rem\n        line-height: .5rem\n        .title\n          width: 85%\n          font-size: .45rem\n        .card-more\n          color: #777\n          font-size: .3rem\n      .card-body\n        margin-top: .3rem\n        .items\n          display: flex\n          flex-wrap: wrap\n          justify-content: space-between\n          .item\n            width: 30%\n            display: flex\n            flex-wrap: wrap\n            .img-wrapper\n              width: 100%\n              img\n                width: 100%\n                border-radius: 10%\n            .desc-wrapper\n              margin: .1rem 0 .3rem 0\n              width: 100%\n              height:.6rem\n              line-height: .3rem\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/music/music-home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{attrs:{\"data\":_vm.discList}},[_c('div',{staticClass:\"music-home\"},[_c('div',{staticClass:\"lunbo\"},[_c('mt-swipe',_vm._l((_vm.recommends),function(item){return _c('mt-swipe-item',{key:item.id},[_c('a',{attrs:{\"href\":item.linkUrl}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.picUrl),expression:\"item.picUrl\"}]})])])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"card-top\"},[_c('div',{staticClass:\"card-head\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"爆款歌单\")]),_vm._v(\" \"),_c('span',{staticClass:\"card-more\",on:{\"click\":_vm.moreList}},[_vm._v(\"更多 >\")])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[_c('ul',{staticClass:\"items\"},_vm._l((_vm.discList),function(item){return _c('li',{key:item.dissid,staticClass:\"item\",on:{\"click\":function($event){_vm.selectItem(item)}}},[_c('div',{staticClass:\"img-wrapper\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.imgurl),expression:\"item.imgurl\"}]})]),_vm._v(\" \"),_c('div',{staticClass:\"desc-wrapper\"},[_c('span',[_vm._v(_vm._s(item.dissname))])])])}))])]),_vm._v(\" \"),_c('div',{staticClass:\"card-mid\"},[_c('div',{staticClass:\"card-head\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"当红炸子鸡\")]),_vm._v(\" \"),_c('span',{staticClass:\"card-more\",on:{\"click\":_vm.moreSingers}},[_vm._v(\"更多 >\")])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[_c('ul',{staticClass:\"items\"},_vm._l((_vm.singers),function(item){return _c('li',{key:item.id,staticClass:\"item\",on:{\"click\":function($event){_vm.selectSinger(item)}}},[_c('div',{staticClass:\"img-wrapper\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.avater),expression:\"item.avater\"}]})]),_vm._v(\" \"),_c('div',{staticClass:\"desc-wrapper\"},[_c('span',[_vm._v(_vm._s(item.name))])])])}))])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1a98b284\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/music/music-home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1a98b284\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./music-home.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music-home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music-home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a98b284\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./music-home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1a98b284\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/music/music-home.vue\n// module id = null\n// module chunks = ","export default class Singer {\n  constructor ({id, name}) {\n    this.id = id\n    this.name = name\n    this.avater = `https://y.gtimg.cn/music/photo_new/T001R300x300M000${id}.jpg?max_age=2592000`\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/singer.js"],"sourceRoot":""}