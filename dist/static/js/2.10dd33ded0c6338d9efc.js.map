{"version":3,"sources":["webpack:///src/base/search-box/search-box.vue","webpack:///./src/assets/js/util.js","webpack:///./src/base/search-box/search-box.vue?6e50","webpack:///./src/base/search-box/search-box.vue","webpack:///./src/api/search.js","webpack:///src/pages/music/music-search-suggest.vue","webpack:///./src/pages/music/music-search-suggest.vue?00bd","webpack:///./src/pages/music/music-search-suggest.vue","webpack:///src/pages/music/music-search.vue","webpack:///./src/pages/music/music-search.vue?d0b6","webpack:///./src/pages/music/music-search.vue"],"names":["search_box","name","props","placeholder","type","String","default","data","query","methods","setQuery","this","created","func","delay","timer","_this","$watch","newQuery","$emit","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","apply","search_box_search_box","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","rawName","value","expression","attrs","domProps","on","input","$event","target","composing","staticRenderFns","base_search_box_search_box","__webpack_require__","normalizeComponent","ssrContext","search","page","zhida","perpage","Object","assign","config","w","p","n","catZhida","zhidaqu","t","flag","ie","sem","aggr","remoteplace","uin","needNewCode","platform","_","format","_axios_0_18_0_axios_default","a","get","params","then","res","Promise","resolve","music_search_suggest","showSinger","Boolean","components","Scroll","scroll_scroll","result","pullup","hasMore","_extends","selectItem","item","singer","js_singer","id","singermid","singername","$router","push","path","setSinger","searchMore","code","console","log","concat","_genResult","_checkMore","song","list","curnum","curpage","totalnum","_search","_this2","ret","_normalizeSongs","forEach","musicData","songid","albummid","getDisplayName","vuex_esm","watch","music_music_search_suggest","scrollToEnd","_l","index","key","click","_s","hotKey","SearchBox","MusicSearchSuggest","music_search_suggest_normalizeComponent","_getHotKey","onQueryChange","addQuery","$refs","searchBox","jsonp","hotkey","slice","music_music_search","ref","k","music_search_Component","music_search_normalizeComponent","music_search","__webpack_exports__"],"mappings":"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","file":"static/js/2.10dd33ded0c6338d9efc.js","sourcesContent":["<template>\n  <div class=\"search-box\">\n    <i class=\"iconfont icon-search\"></i>\n    <input class=\"box\" :placeholder=\"placeholder\" v-model=\"query\">\n  </div>\n</template>\n\n<script>\nimport { debounce } from 'assets/js/util'\nexport default {\n  name: 'Home',\n  props: {\n    placeholder: {\n      type: String,\n      default: '搜索歌曲、歌手'\n    }\n  },\n  data () {\n    return {\n      query: ''\n    }\n  },\n  methods: {\n    setQuery (query) {\n      this.query = query\n    }\n  },\n  created () {\n    // 监听输入框中的数据是否发生变化\n    // 调用了截流函数，减少发送请求次数\n    this.$watch('query', debounce((newQuery) => {\n      this.$emit('query', newQuery)\n    }, 200))\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n  .search-box\n    display: flex\n    align-items: center\n    box-sizing: border-box\n    width: 100%\n    padding: 0 .1rem\n    height: .8rem\n    background: #999\n    border-radius: .12rem\n    .icon-search\n      font-size: .5rem\n      color: #fff\n    .box\n      flex: 1\n      margin: 0 .1rem\n      line-height: .36rem\n      background: #999\n      color: #fff\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/base/search-box/search-box.vue","function getRandomInt (min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nexport function shuffle (arr) {\n  let _arr = arr.slice()\n  for (let i = 0; i < _arr.length; i++) {\n    let j = getRandomInt(0, i)\n    let t = _arr[i]\n    _arr[i] = _arr[j]\n    _arr[j] = t\n  }\n  return _arr\n}\n\n// 截流函数： 当一个函数被在很快的时间内反复调用时，该函数只会执行一次\nexport function debounce (func, delay) {\n  let timer\n\n  return function (...args) {\n    if (timer) {\n      clearTimeout(timer)\n    }\n    timer = setTimeout(() => {\n      func.apply(this, args)\n    }, delay)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/util.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-box\"},[_c('i',{staticClass:\"iconfont icon-search\"}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],staticClass:\"box\",attrs:{\"placeholder\":_vm.placeholder},domProps:{\"value\":(_vm.query)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-68b06a98\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/base/search-box/search-box.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-68b06a98\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./search-box.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./search-box.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./search-box.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-68b06a98\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./search-box.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-68b06a98\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/search-box/search-box.vue\n// module id = null\n// module chunks = ","import jsonp from 'assets/js/jsonp'\nimport {commonParams1, options1} from './config'\nimport axios from 'axios'\n\nexport function getHotKey () {\n  const url = 'https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg'\n\n  const data = Object.assign({}, commonParams1, {\n    uin: 0,\n    needNewCode: 1,\n    platform: 'h5'\n  })\n\n  return jsonp(url, data, options1)\n}\n\nexport function search (query, page, zhida, perpage) {\n  const url = '/api/search'\n\n  const data = Object.assign({}, commonParams1, {\n    w: query,\n    p: page,\n    perpage,\n    n: perpage,\n    catZhida: zhida ? 1 : 0,\n    zhidaqu: 1,\n    t: 0,\n    flag: 1,\n    ie: 'utf-8',\n    sem: 1,\n    aggr: 0,\n    remoteplace: 'txt.mqq.all',\n    uin: 0,\n    needNewCode: 1,\n    platform: 'h5',\n    _: 1534346388904,\n    format: 'json'\n  })\n\n  return axios.get(url, {\n    params: data\n  }).then((res) => {\n    return Promise.resolve(res.data)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/search.js","<template>\n  <scroll class=\"music-search-suggest\"\n          :data=\"result\"\n          :pullup=\"pullup\"\n          @scrollToEnd=\"searchMore\"\n  >\n    <ul class=\"suggest-list\">\n      <li class=\"suggest-item\" v-for=\"(item, index) in result\" :key=\"index\" @click=\"selectItem(item)\">\n        <div class=\"icon\">\n          <i class=\"iconfont icon-search\"></i>\n        </div>\n        <div class=\"name\">\n          <p class=\"text\">{{getDisplayName(item)}}</p>\n        </div>\n      </li>\n    </ul>\n  </scroll>\n</template>\n\n<script>\nimport { search } from 'api/search'\nimport { ERR_OK } from 'api/config'\nimport { createSong } from 'assets/js/song.js'\nimport Scroll from 'base/scroll/scroll'\nimport Singer from 'assets/js/singer.js'\nimport { mapMutations } from 'vuex'\n\nconst TYPE_SINGER = 'singer'\nconst perpage = 20\n\nexport default {\n  name: 'MusicSearchSuggest',\n  props: {\n    query: {\n      type: String,\n      default: ''\n    },\n    showSinger: {\n      type: Boolean,\n      default: true\n    }\n  },\n  components: {\n    Scroll\n  },\n  data () {\n    return {\n      page: 1,\n      result: [],\n      pullup: true,\n      hasMore: true\n    }\n  },\n  methods: {\n    selectItem (item) {\n      if (item.type === TYPE_SINGER) {\n        const singer = new Singer({\n          id: item.singermid,\n          name: item.singername\n        })\n        this.$router.push({\n          path: `/music-search/${singer.id}`\n        })\n        this.setSinger(singer)\n      }\n    },\n    searchMore () {\n      if (!this.hasMore) {\n        return ''\n      } else {\n        this.page++\n        search(this.query, this.page, this.showSinger, perpage).then((res) => {\n          if (res.code === ERR_OK) {\n            console.log(res.data)\n            this.result = this.result.concat(this._genResult(res.data))\n            console.log(this.result)\n            this._checkMore(res.data)\n          }\n        })\n      }\n    },\n    _checkMore (data) {\n      const song = data.song\n      if (!song.list.length || (song.curnum + song.curpage * perpage) > song.totalnum) {\n        this.hasMore = false\n      } else {\n        this.hasMore = true\n      }\n    },\n    _search () {\n      this.hasMore = true\n      search(this.query, this.page, this.showSinger, perpage).then((res) => {\n        if (res.code === ERR_OK) {\n          console.log(res.data)\n          this.result = this._genResult(res.data)\n          console.log(this.result)\n          this._checkMore(res.data)\n        }\n      })\n    },\n    _genResult (data) {\n      let ret = []\n      if (data.zhida && data.zhida.singername) {\n        ret.push({...data.zhida, ...{type: TYPE_SINGER}})\n      }\n      if (data.song) {\n        ret = ret.concat(this._normalizeSongs(data.song.list))\n      }\n      return ret\n    },\n    _normalizeSongs (list) {\n      let ret = []\n      list.forEach((musicData) => {\n        if (musicData.songid && musicData.albummid) {\n          ret.push(createSong(musicData))\n        }\n      })\n      return ret\n    },\n    getDisplayName (item) {\n      if (item.type === TYPE_SINGER) {\n        return item.singername\n      } else {\n        return `${item.name} - ${item.singer}`\n      }\n    },\n    ...mapMutations({\n      setSinger: 'SET_SINGER'\n    })\n  },\n  watch: {\n    query () {\n      this._search()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n  .music-search-suggest\n    height: 100%\n    overflow: hidden\n    .suggest-list\n      padding: 0 .6rem\n      .suggest-item\n        display: flex\n        align-items: center\n        padding-bottom: .4rem\n      .icon\n        flex: 0 0 .6rem\n        width: .6rem\n      .name\n        flex: 1\n        font-size: .24rem\n        overflow: hidden\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/music/music-search-suggest.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{staticClass:\"music-search-suggest\",attrs:{\"data\":_vm.result,\"pullup\":_vm.pullup},on:{\"scrollToEnd\":_vm.searchMore}},[_c('ul',{staticClass:\"suggest-list\"},_vm._l((_vm.result),function(item,index){return _c('li',{key:index,staticClass:\"suggest-item\",on:{\"click\":function($event){_vm.selectItem(item)}}},[_c('div',{staticClass:\"icon\"},[_c('i',{staticClass:\"iconfont icon-search\"})]),_vm._v(\" \"),_c('div',{staticClass:\"name\"},[_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.getDisplayName(item)))])])])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-30024626\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/pages/music/music-search-suggest.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-30024626\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./music-search-suggest.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./music-search-suggest.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./music-search-suggest.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-30024626\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./music-search-suggest.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-30024626\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/music/music-search-suggest.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"music-search\">\n    <div class=\"search-box-wrapper\">\n      <search-box ref=\"searchBox\" @query=\"onQueryChange\"></search-box>\n    </div>\n    <div class=\"shortcut-wrapper\" v-show=\"!query\">\n      <div class=\"shortcut\">\n        <div>\n          <div class=\"hot-key\">\n            <h1 class=\"title\">热门搜索</h1>\n            <ul>\n              <li @click=\"addQuery(item.k)\" class=\"item\" v-for=\"item in hotKey\" :key=\"item.n\">\n                <span>{{item.k}}</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"search-result\" v-show=\"query\">\n      <music-search-suggest :query=\"query\"></music-search-suggest>\n    </div>\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport SearchBox from '@/base/search-box/search-box'\nimport { getHotKey } from '@/api/search'\nimport { ERR_OK } from '@/api/config'\nimport MusicSearchSuggest from 'pages/music/music-search-suggest'\nexport default {\n  name: 'Home',\n  data () {\n    return {\n      hotKey: [],\n      query: ''\n    }\n  },\n  components: {\n    SearchBox,\n    MusicSearchSuggest\n  },\n  created () {\n    this._getHotKey()\n  },\n  methods: {\n\n    onQueryChange (query) {\n      this.query = query\n    },\n    addQuery (query) {\n      this.$refs.searchBox.setQuery(query)\n    },\n    _getHotKey () {\n      getHotKey().then((res) => {\n        if (res.code === ERR_OK) {\n          this.hotKey = res.data.hotkey.slice(0, 10)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n  .music-search\n    .search-box-wrapper\n      margin: .4rem\n    .shortcut-wrapper\n      position: fixed\n      top: 3.6rem\n      bottom: 0\n      width: 100%\n      .shortcut\n        height: 100%\n        overflow: hidden\n        .hot-key\n          margin: 0 .4rem .4rem .4rem\n          .title\n            margin-bottom: .4rem\n          .item\n            display: inline-block\n            padding: .1rem .2rem\n            margin: 0 .2rem .1rem 0\n            border-radius: .12rem\n            background: #777\n            color: #fff\n            font-size: .24rem\n    .search-result\n      position: fixed\n      width: 100%\n      top: 3.5rem\n      bottom: 0\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/music/music-search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-search\"},[_c('div',{staticClass:\"search-box-wrapper\"},[_c('search-box',{ref:\"searchBox\",on:{\"query\":_vm.onQueryChange}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.query),expression:\"!query\"}],staticClass:\"shortcut-wrapper\"},[_c('div',{staticClass:\"shortcut\"},[_c('div',[_c('div',{staticClass:\"hot-key\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.hotKey),function(item){return _c('li',{key:item.n,staticClass:\"item\",on:{\"click\":function($event){_vm.addQuery(item.k)}}},[_c('span',[_vm._v(_vm._s(item.k))])])}))])])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],staticClass:\"search-result\"},[_c('music-search-suggest',{attrs:{\"query\":_vm.query}})],1),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-e875d00c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/pages/music/music-search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e875d00c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./music-search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./music-search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./music-search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e875d00c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./music-search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e875d00c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/music/music-search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}