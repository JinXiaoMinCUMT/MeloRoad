{"version":3,"sources":["webpack:///src/pages/music/music-singer.vue","webpack:///./src/pages/music/music-singer.vue?e637","webpack:///./src/pages/music/music-singer.vue","webpack:///./src/assets/js/singer.js"],"names":["music_singer","name","data","singers","components","Scroll","scroll_scroll","methods","_extends","_getSingerList","_this","this","Object","singer","then","res","code","config","_normalizeSinger","list","map","hot","title","items","forEach","item","index","push","js_singer","id","Fsinger_mid","Fsinger_name","key","Findex","ret","val","match","sort","a","b","charCodeAt","concat","selectSinger","setSinger","$router","path","vuex_esm","activated","music_music_singer","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_l","group","_v","_s","on","click","$event","directives","rawName","value","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Singer","_ref","_classCallCheck","avater"],"mappings":"8VAiCAA,GACAC,KAAA,cACAC,KAFA,WAGA,OACAC,aAGAC,YACAC,OAAAC,EAAA,GAEAC,QAAAC,GACAC,eADA,WACA,IAAAC,EAAAC,KACMC,OAAAC,EAAA,EAAAD,GAANE,KAAA,SAAAC,GACAA,EAAAC,OAAAC,EAAA,IACAP,EAAAP,QAAAO,EAAAQ,iBAAAH,EAAAb,KAAAiB,UAKAD,iBATA,SASAC,GACA,IAAAC,GACAC,KACAC,MAzBA,OA0BAC,WAGAJ,EAAAK,QAAA,SAAAC,EAAAC,GACAA,EA7BA,IA8BAN,EAAAC,IAAAE,MAAAI,KACA,IAAAC,EAAA,GACAC,GAAAJ,EAAAK,YACA7B,KAAAwB,EAAAM,gBAIA,IAAAC,EAAAP,EAAAQ,OACAb,EAAAY,KACAZ,EAAAY,IACAV,MAAAU,EACAT,WAGAH,EAAAY,GAAAT,MAAAI,KACA,IAAAC,EAAA,GACAC,GAAAJ,EAAAK,YACA7B,KAAAwB,EAAAM,kBAKA,IAAAV,KACAa,KACA,QAAAF,KAAAZ,EAAA,CACA,IAAAe,EAAAf,EAAAY,GACAG,EAAAb,MAAAc,MAAA,YACAF,EAAAP,KAAAQ,GA1DA,SA2DAA,EAAAb,OACAD,EAAAM,KAAAQ,GAMA,OAHAD,EAAAG,KAAA,SAAAC,EAAAC,GACA,OAAAD,EAAAhB,MAAAkB,WAAA,GAAAD,EAAAjB,MAAAkB,WAAA,KAEAnB,EAAAoB,OAAAP,IAEAQ,aAvDA,SAuDA7B,GACAF,KAAAgC,UAAA9B,GACAF,KAAAiC,QAAAjB,MACAkB,KAAA,uBAAAhC,EAAAgB,OAGAjB,OAAAkC,EAAA,EAAAlC,EACA+B,UAAA,gBAIAI,UA5EA,WA6EApC,KAAAF,mBC3GeuC,GADEC,OAFjB,WAA0B,IAAAC,EAAAvC,KAAawC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,iBAA2BF,EAAA,UAAeE,YAAA,UAAAC,OAA6BtD,KAAAgD,EAAA/C,WAAoBkD,EAAA,KAAAH,EAAAO,GAAAP,EAAA,iBAAAQ,EAAAhC,GAAqD,OAAA2B,EAAA,MAAgBrB,IAAAN,EAAA6B,YAAA,eAAmCF,EAAA,MAAWE,YAAA,qBAA+BL,EAAAS,GAAAT,EAAAU,GAAAF,EAAApC,UAAA4B,EAAAS,GAAA,KAAAN,EAAA,KAAAH,EAAAO,GAAAC,EAAA,eAAAjC,GAAwF,OAAA4B,EAAA,MAAgBrB,IAAAP,EAAAI,GAAA0B,YAAA,kBAAAM,IAA8CC,MAAA,SAAAC,GAAyBb,EAAAR,aAAAjB,OAAyB4B,EAAA,OAAYW,aAAa/D,KAAA,OAAAgE,QAAA,SAAAC,MAAAzC,EAAA,OAAA0C,WAAA,gBAA0EZ,YAAA,WAAuBL,EAAAS,GAAA,KAAAN,EAAA,QAAyBE,YAAA,SAAmBL,EAAAS,GAAAT,EAAAU,GAAAnC,EAAAxB,qBAAqCiD,EAAAS,GAAA,KAAAN,EAAA,cAAAA,EAAA,0BAEnuBe,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEvE,EACAgD,GATF,EAVA,SAAAwB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,2CC1BXI,EAAA,EACnB,SAAAC,EAAAC,GAAyB,IAAX9C,EAAW8C,EAAX9C,GAAI5B,EAAO0E,EAAP1E,kGAAO2E,CAAAjE,KAAA+D,GACvB/D,KAAKkB,GAAKA,EACVlB,KAAKV,KAAOA,EACZU,KAAKkE,OAAL,sDAAoEhD,EAApE","file":"static/js/2.2212d2e169f7f7e04a26.js","sourcesContent":["<template>\n  <div>\n    <div class=\"music-singer\">\n      <scroll :data=\"singers\" class=\"wrapper\">\n        <ul>\n          <li class=\"list-group\" v-for=\"(group, index) in singers\" :key=\"index\">\n            <h2 class=\"list-group-title\">{{group.title}}</h2>\n            <ul>\n              <li @click=\"selectSinger(item)\" class=\"list-group-item\" v-for=\"item in group.items\" :key=\"item.id\">\n                <img v-lazy=\"item.avater\" class=\"avatar\">\n                <span class=\"name\">{{item.name}}</span>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </scroll>\n      <keep-alive>\n        <router-view></router-view>\n      </keep-alive>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getSingerList } from '@/api/singer'\nimport { ERR_OK } from '@/api/config'\nimport Singer from 'assets/js/singer.js'\nimport Scroll from '@/base/scroll/scroll'\nimport { mapMutations } from 'vuex'\n\nconst HOT_NAME = '热门歌手'\nconst HOT_SINGER_LEN = 10\n\nexport default {\n  name: 'MusicSinger',\n  data () {\n    return {\n      singers: []\n    }\n  },\n  components: {\n    Scroll\n  },\n  methods: {\n    _getSingerList () {\n      getSingerList().then((res) => {\n        if (res.code === ERR_OK) {\n          this.singers = this._normalizeSinger(res.data.list)\n          // this.setSingers(this.singers)\n        }\n      })\n    },\n    _normalizeSinger (list) {\n      let map = {\n        hot: {\n          title: HOT_NAME,\n          items: []\n        }\n      }\n      list.forEach((item, index) => {\n        if (index < HOT_SINGER_LEN) {\n          map.hot.items.push(\n            new Singer({\n              id: item.Fsinger_mid,\n              name: item.Fsinger_name\n            })\n          )\n        }\n        const key = item.Findex\n        if (!map[key]) {\n          map[key] = {\n            title: key,\n            items: []\n          }\n        }\n        map[key].items.push(\n          new Singer({\n            id: item.Fsinger_mid,\n            name: item.Fsinger_name\n          })\n        )\n      })\n      // 为了得到有序列表， 我们需要处理 map\n      let hot = []\n      let ret = []\n      for (let key in map) {\n        let val = map[key]\n        if (val.title.match(/[a-zA-Z]/)) {\n          ret.push(val)\n        } else if (val.title === HOT_NAME) {\n          hot.push(val)\n        }\n      }\n      ret.sort((a, b) => {\n        return a.title.charCodeAt(0) - b.title.charCodeAt(0)\n      })\n      return hot.concat(ret)\n    },\n    selectSinger (singer) {\n      this.setSinger(singer)\n      this.$router.push({\n        path: `/music/music-singer/${singer.id}`\n      })\n    },\n    ...mapMutations({\n      setSinger: 'SET_SINGER'\n      // setSingers: 'SET_SINGERS'\n    })\n  },\n  activated () {\n    this._getSingerList()\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n  .music-singer\n    position: fixed\n    top: 2.1rem\n    bottom: 0\n    .wrapper\n      height: 100%\n      .list-group\n        padding-bottom: .6rem\n        .list-group-title\n          height: .6rem\n          line-height: .6rem\n          padding-left: .4rem\n          font-size: .3rem\n          // font-weight: 600\n          color: #888\n        .list-group-item\n          display: flex\n          align-items: center\n          padding: .4rem 0 0 .6rem\n          .avatar\n            display: block\n            width: 1rem\n            height: 1rem\n            border-radius: 50%\n          .name\n            margin-left: .3rem\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/music/music-singer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"music-singer\"},[_c('scroll',{staticClass:\"wrapper\",attrs:{\"data\":_vm.singers}},[_c('ul',_vm._l((_vm.singers),function(group,index){return _c('li',{key:index,staticClass:\"list-group\"},[_c('h2',{staticClass:\"list-group-title\"},[_vm._v(_vm._s(group.title))]),_vm._v(\" \"),_c('ul',_vm._l((group.items),function(item){return _c('li',{key:item.id,staticClass:\"list-group-item\",on:{\"click\":function($event){_vm.selectSinger(item)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.avater),expression:\"item.avater\"}],staticClass:\"avatar\"}),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))])])}))])}))]),_vm._v(\" \"),_c('keep-alive',[_c('router-view')],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-65c69c38\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/music/music-singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-65c69c38\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./music-singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music-singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music-singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-65c69c38\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./music-singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-65c69c38\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/music/music-singer.vue\n// module id = null\n// module chunks = ","export default class Singer {\n  constructor ({id, name}) {\n    this.id = id\n    this.name = name\n    this.avater = `https://y.gtimg.cn/music/photo_new/T001R300x300M000${id}.jpg?max_age=2592000`\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/singer.js"],"sourceRoot":""}